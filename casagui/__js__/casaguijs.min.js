/*!
 * Copyright (c) 2012 - 2023, Anaconda, Inc., and Bokeh Contributors
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 * 
 * Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 * 
 * Neither the name of Anaconda nor the names of any contributors
 * may be used to endorse or promote products derived from this software
 * without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 * THE POSSIBILITY OF SUCH DAMAGE.
 */
(function(root, factory) {
  factory(root["Bokeh"], undefined);
})(this, function(Bokeh, version) {
  let define;
  return (function(modules, entry, aliases, externals) {
    const bokeh = typeof Bokeh !== "undefined" && (version != null ? Bokeh[version] : Bokeh);
    if (bokeh != null) {
      return bokeh.register_plugin(modules, entry, aliases);
    } else {
      throw new Error("Cannot find Bokeh " + version + ". You have to load it prior to loading plugins.");
    }
  })
({
"0c82799881": function _(a,e,c,t,s){t();const o=a("11d795d801");s("DataPipe",o.DataPipe);const i=a("16d45bebb8");s("ImagePipe",i.ImagePipe);const r=a("f3269611af");s("ImageDataSource",r.ImageDataSource);const p=a("224acccf0a");s("SpectraDataSource",p.SpectraDataSource);const D=a("b6d0976db1");s("WcsTicks",D.WcsTicks);(0,a("@bokehjs/base").register_models)({DataPipe:o.DataPipe,ImagePipe:i.ImagePipe,ImageDataSource:r.ImageDataSource,SpectraDataSource:p.SpectraDataSource,WcsTicks:D.WcsTicks})},
"11d795d801": function _(e,s,i,t,n){var u;t();const c=e("@bokehjs/models/sources/data_source");class h extends c.DataSource{constructor(e){super(e),this.send_queue={},this.connection_queue=[],this.pending={},this.incoming_callbacks={}}initialize(){super.initialize();(()=>{null!=this.init_script&&this.init_script.execute(this)})()}register(e,s){this.incoming_callbacks[e]=s}send(e,s,i,t=!1){let n={id:e,message:s,direction:"j2p",session:object_id(this)};if(e in this.pending)if(e in this.send_queue)if("boolean"==typeof t&&t&&this.send_queue[e].length>0)this.send_queue[e][0].msg=n,this.send_queue[e][0].cb=i;else if("function"==typeof t&&this.send_queue[e].length>0){let s=!1;for(const u of this.send_queue[e])t(u.msg.message)&&(u.msg=n,u.cb=i,s=!0);s||this.send_queue[e].push({cb:i,msg:n})}else this.send_queue[e].push({cb:i,msg:n});else this.send_queue[e]=[{cb:i,msg:n}];else if(this.websocket.readyState===WebSocket.CONNECTING)this.connection_queue.push([this,[e,s,i]]);else if(e in this.send_queue&&this.send_queue[e].length>0){this.send_queue[e].push({cb:i,msg:n});{let{cb:s,msg:i}=this.send_queue[e].shift();this.pending[e]={cb:s},this.websocket.send(JSON.stringify(i))}}else this.pending[e]={cb:i},this.websocket.send(JSON.stringify(n))}}i.DataPipe=h,u=h,h.__name__="DataPipe",h.__module__="casagui.bokeh.sources._data_pipe",u.define((({Any:e,Tuple:s,String:i,Number:t})=>({init_script:[e,null],address:[s(i,t)]})))},
"16d45bebb8": function _(e,i,s,t,n){var a;t();const d=e("11d795d801");class l extends d.DataPipe{constructor(e){super(e),this.position={},this._wcs=null}channel(e,i,s){this.position[s]={index:e};let t={action:"channel",index:e,id:s};super.send(this.dataid,t,i)}spectra(e,i,s,t=!1){let n={action:"spectra",index:e,id:s};super.send(this.dataid,n,i,t)}refresh(e,i,s=[0,0]){let{index:t}=i in this.position?this.position[i]:{index:s};if(2===t.length){let s={action:"channel",index:t,id:i};super.send(this.dataid,s,e)}else if(3===t.length){let s={action:"spectra",index:t,id:i};super.send(this.dataid,s,e)}}wcs(){return this._wcs}}s.ImagePipe=l,a=l,l.__name__="ImagePipe",l.__module__="casagui.bokeh.sources._image_pipe",a.define((({Number:e,Nullable:i,String:s,Tuple:t})=>({dataid:[s],shape:[t(e,e,e,e)],fits_header_json:[i(s),null]})))},
"f3269611af": function _(e,i,s,a,t){var c;a();const n=e("@bokehjs/models/sources/column_data_source"),u=e("@bokehjs/core/util/string"),r=e("16d45bebb8");class h extends n.ColumnDataSource{constructor(e){super(e),this.imid=(0,u.uuid4)()}initialize(){super.initialize();(()=>{null!=this.init_script&&this.init_script.execute(this)})()}channel(e,i=0,s){this.image_source.channel([i,e],(a=>{this.cur_chan=[i,e],s&&s(a),this.data=a.chan}),this.imid)}signal_change(){this.change.emit()}refresh(e){this.image_source.refresh((i=>{e&&e(i),this.data=i.chan}),this.imid,[0,0])}wcs(){return this.image_source.wcs()}}s.ImageDataSource=h,c=h,h.__name__="ImageDataSource",h.__module__="casagui.bokeh.sources._image_data_source",c.define((({Tuple:e,Number:i,Ref:s,Any:a})=>({init_script:[a,null],image_source:[s(r.ImagePipe)],num_chans:[e(i,i)],cur_chan:[e(i,i)]})))},
"224acccf0a": function _(e,s,i,a,t){var r;a();const c=e("@bokehjs/models/sources/column_data_source"),u=e("@bokehjs/core/util/string"),o=e("16d45bebb8");class _ extends c.ColumnDataSource{constructor(e){super(e),this.imid=(0,u.uuid4)()}initialize(){super.initialize()}spectra(e,s,i=0,a=!1){this.image_source.spectra([e,s,i],(e=>this.data=e.spectrum),this.imid,a)}refresh(){this.image_source.refresh((e=>this.data=e.spectrum),this.imid,[0,0,0])}}i.SpectraDataSource=_,r=_,_.__name__="SpectraDataSource",_.__module__="casagui.bokeh.sources._spectra_data_source",r.define((({Ref:e})=>({image_source:[e(o.ImagePipe)]})))},
"b6d0976db1": function _(o,s,i,t,e){var r;t();const a=o("@bokehjs/models/formatters/tick_formatter"),c=o("f3269611af");class d extends a.TickFormatter{constructor(o){super(o),this._axis=null,this._coord="world"}initialize(){super.initialize(),"x"==this.axis||"X"==this.axis||"y"==this.axis||"Y"==this.axis?this._axis="x"==this.axis||"X"==this.axis?"x":"y":console.log("ERROR: WcsTicks formatter created with invalid axis:",this.axis)}doFormat(o){const s=[];if(this._axis&&this.image_source.wcs()&&"world"==this._coord)for(let i=0,t=o.length;i<t;i++)if("x"==this._axis){const t=new window.coordtxl.Point2D(Number(o[i]),0);this.image_source.wcs().imageToWorldCoords(t,!1),s.push(new window.coordtxl.WorldCoords(t.getX(),t.getY()).format(2e3)[0])}else{const t=new window.coordtxl.Point2D(0,Number(o[i]));this.image_source.wcs().imageToWorldCoords(t,!1),s.push(new window.coordtxl.WorldCoords(t.getX(),t.getY()).format(2e3)[1])}else for(let i=0,t=o.length;i<t;i++)s.push(""+o[i]);return s}coordinates(o){return o!=this._coord&&("world"!=o&&"pixel"!=o||(this._coord=o)),this._coord}}i.WcsTicks=d,r=d,d.__name__="WcsTicks",d.__module__="casagui.bokeh.format._wcs_ticks",r.define((({Ref:o,String:s})=>({axis:[s],image_source:[o(c.ImageDataSource)]})))},
}, "0c82799881", {"index":"0c82799881","src/bokeh/sources/data_pipe":"11d795d801","src/bokeh/sources/image_pipe":"16d45bebb8","src/bokeh/sources/image_data_source":"f3269611af","src/bokeh/sources/spectra_data_source":"224acccf0a","src/bokeh/format/wcs_ticks":"b6d0976db1"}, {});});
